# üîç PatternSeeker

–õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è header-only –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞ C++20 –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç—Ä–æ–∫ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON, XML –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –±–µ–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Ç—è–∂—ë–ª—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä—ã.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Å –Ω—É–ª–µ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `std::string_view` –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- **Header-only** ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –∫–æ–º–ø–∏–ª—è—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
- **–õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è** ‚Äî –Ω–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
- **–ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª–µ–º** ‚Äî –≤—ã —Ä–µ—à–∞–µ—Ç–µ, –∫–æ–≥–¥–∞ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø–∞—Ä—Å–∏–Ω–≥–∞
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON –∏ XML** ‚Äî —É–¥–æ–±–Ω—ã–µ –ø–æ–º–æ—â–Ω–∏–∫–∏ –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- **–ì–æ—Ç–æ–≤–∞ –∫ C++20** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π C++ —Å —á–∏—Å—Ç—ã–º API

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```cpp
#include "PatternSeeker.hpp"
#include <iostream>

using namespace PatterSeekerNS;

int main() {
    // –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞
    PatternSeeker ps("–ò–º—è: –ò–≤–∞–Ω, –í–æ–∑—Ä–∞—Å—Ç: 30");

    ps.to("–ò–º—è: ", move_after);
    auto name = ps.extract(", ", move_after);
    std::cout << "–ò–º—è: " << name << std::endl;  // "–ò–≤–∞–Ω"

    ps.to("–í–æ–∑—Ä–∞—Å—Ç: ", move_after);
    auto age = ps.takeUInt64();
    std::cout << "–í–æ–∑—Ä–∞—Å—Ç: " << *age << std::endl;   // 30

    return 0;
}
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CMake

```bash
git clone https://github.com/yourusername/PatternSeeker.git
cd PatternSeeker
mkdir build && cd build
cmake .. -DPATTERN_SEEKER_BUILD_TESTS=ON
cmake --build .
```

### –ö–∞–∫ –ø–æ–¥–º–æ–¥—É–ª—å

```bash
git submodule add https://github.com/yourusername/PatternSeeker.git
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ PatternSeeker.hpp –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ
```

### –ü—Ä—è–º–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ `PatternSeeker.hpp` –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ.

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–∞—Ä—Å–∏–Ω–≥ JSON

```cpp
PatternSeeker json(R"({"name": "–ê–ª–∏—Å–∞", "score": 42, "active": true})");

auto name = json.getJsonProp("name");
std::cout << name << std::endl;  // –ê–ª–∏—Å–∞

auto score = json.getJsonProp("score").takeUInt64();
std::cout << *score << std::endl;  // 42

auto active = json.getJsonProp("active");
std::cout << active << std::endl;  // true
```

### –ü–∞—Ä—Å–∏–Ω–≥ XML

```cpp
PatternSeeker xml("<user id=\"123\"><name>–ë–æ–±</name></user>");

auto id = xml.getXmlAttr("id");
std::cout << id << std::endl;  // 123

auto name = xml.getXmlTagBody("name");
std::cout << name << std::endl;  // –ë–æ–±
```

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

```cpp
PatternSeeker ps("–ù–∞—á–∞–ª–æ [–≤–ª–æ–∂–µ–Ω–Ω—ã–µ [–¥–∞–Ω–Ω—ã–µ]] –ö–æ–Ω–µ—Ü");

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–∫–æ–±–∫–∞–º–∏
auto content = ps.extract('[', ']');
std::cout << content << std::endl;  // [–≤–ª–æ–∂–µ–Ω–Ω—ã–µ [–¥–∞–Ω–Ω—ã–µ]]

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏
PatternSeeker ps2("–ü—Ä–∏–≤–µ—Ç –ú–∏—Ä!");
auto word = ps2.extract("–ü—Ä–∏–≤–µ—Ç ", "!");
std::cout << word << std::endl;  // –ú–∏—Ä
```

### –†–∞–±–æ—Ç–∞ —Å —á–∏—Å–ª–∞–º–∏

```cpp
PatternSeeker ps("–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: -15 –≥—Ä–∞–¥—É—Å–æ–≤");

ps.to("–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ", move_after);
auto temp = ps.takeInt64();
if (temp) {
    std::cout << "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: " << *temp << "¬∞C" << std::endl;  // -15¬∞C
}

// –° –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
auto temp2 = ps.takeInt64(0);  // –í–µ—Ä–Ω—ë—Ç 0 –ø—Ä–∏ –æ—à–∏–±–∫–µ
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –†–µ–∂–∏–º—ã –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (Move Modes)

–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –º–æ–º–µ–Ω—Ç–æ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞:

- `none` ‚Äî –Ω–µ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `move_before` ‚Äî –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫ –Ω–∞—á–∞–ª—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
- `move_after` ‚Äî –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∑–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

```cpp
PatternSeeker ps("–ù–∞–π–¥–∏ —ç—Ç–æ —Å–ª–æ–≤–æ");

// –ù–µ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å
ps.to("—ç—Ç–æ");  // mode = none
std::cout << ps << std::endl;  // "–ù–∞–π–¥–∏ —ç—Ç–æ —Å–ª–æ–≤–æ"

// –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç –∑–∞ "—ç—Ç–æ "
ps.to("—ç—Ç–æ ", move_after);
std::cout << ps << std::endl;  // "—Å–ª–æ–≤–æ"
```

### –î–∏–∑–∞–π–Ω –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (Zero-Copy Design)

PatternSeeker –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `std::string_view`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –±—ã—Å—Ç—Ä–æ–π, –Ω–æ **–≤—ã –¥–æ–ª–∂–Ω—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∏—Å—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ–ª—å—à–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ PatternSeeker**.

```cpp
std::string data = "–í–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ";
PatternSeeker ps(data);

// ‚ùå –û–®–ò–ë–ö–ê: data –±—É–¥–µ—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞, –Ω–æ ps –≤—Å—ë –µ—â—ë –Ω–∞ –Ω–µ—ë —Å—Å—ã–ª–∞–µ—Ç—Å—è
auto getDangling = [&]() {
    std::string temp = "–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ";
    return PatternSeeker(temp);  // –û–ø–∞—Å–Ω–æ—Å—Ç—å!
};

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: data –∂–∏–≤—ë—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ
void processData(const std::string& data) {
    PatternSeeker ps(data);
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º ps –∑–¥–µ—Å—å
}
```

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é

–ú–µ—Ç–æ–¥ `extract(char start, char end)` —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å:

```cpp
PatternSeeker ps("{ \"obj\": { \"nested\": 123 } }");

auto obj = ps.extract('{', '}');
std::cout << obj << std::endl;  // { "obj": { "nested": 123 } }
```

## üìö API —Å–ø—Ä–∞–≤–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `size()` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –≤–∏–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏ |
| `isEmpty()` | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø—É—Å—Ç–∞ –ª–∏ —Å—Ç—Ä–æ–∫–∞ |
| `to_string()` | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ `std::string` |
| `to_string_view()` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `std::string_view` |

### –ù–∞–≤–∏–≥–∞—Ü–∏—è

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `expect(str)` | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –∑–∞ `str` |
| `startsWith(str)` | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–µ–∑ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è |
| `to(str, mode)` | –ù–∞—Ö–æ–¥–∏—Ç `str` –∏ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è |
| `skip(n)` | –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç `n` —Å–∏–º–≤–æ–ª–æ–≤ |
| `skipWhiteSpaces()` | –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–±–µ–ª—ã |

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `extract(from, to, mode)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏ |
| `extract(to, mode)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–æ —Å—Ç—Ä–æ–∫–∏ |
| `extract(start, end, mode)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å —É—á—ë—Ç–æ–º –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ |
| `extract(size, mode)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç N —Å–∏–º–≤–æ–ª–æ–≤ |
| `extractUntilOneOf(chars, mode)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–æ –ª—é–±–æ–≥–æ –∏–∑ —Å–∏–º–≤–æ–ª–æ–≤ |

### –ü–∞—Ä—Å–∏–Ω–≥ —á–∏—Å–µ–ª

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `takeUInt64()` | –ü–∞—Ä—Å–∏—Ç –±–µ–∑–∑–Ω–∞–∫–æ–≤–æ–µ —á–∏—Å–ª–æ |
| `takeUInt64(def)` | –° –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| `takeInt64()` | –ü–∞—Ä—Å–∏—Ç –∑–Ω–∞–∫–æ–≤–æ–µ —á–∏—Å–ª–æ |
| `takeInt64(def)` | –° –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |

### JSON –∏ XML

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `getJsonProp(name)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç JSON —Å–≤–æ–π—Å—Ç–≤–æ |
| `getXmlTag(name, mode)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≤–µ—Å—å XML —Ç–µ–≥ |
| `getXmlTagBody(name, mode)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–µ–≥–∞ |
| `getXmlAttr(name)` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç XML –∞—Ç—Ä–∏–±—É—Ç |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
cmake -DPATTERN_SEEKER_BUILD_TESTS=ON ..
cmake --build .
ctest
```

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–î–ª—è JSON –∏ XML –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä—ã** –≤ production-–∫–æ–¥–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
2. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –º–µ—Ç–æ–¥–æ–≤ `take*()` –∏ `extract()` –Ω–∞ –ø—É—Å—Ç–æ—Ç—É
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mode=none`** –∫–æ–≥–¥–∞ —Ö–æ—Ç–∏—Ç–µ "–∑–∞–≥–ª—è–Ω—É—Ç—å –≤–ø–µ—Ä—ë–¥" –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
4. **–î–µ–ª–∞–π—Ç–µ –∫–æ–ø–∏–∏** PatternSeeker (—ç—Ç–æ –¥—ë—à–µ–≤–æ) –¥–ª—è –ø—Ä–æ–±–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

```cpp
PatternSeeker ps("–¥–∞–Ω–Ω—ã–µ");
auto copy = ps;  // –î—ë—à–µ–≤–æ, –º–æ–∂–Ω–æ –ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–ø–∏–∏

if (copy.to("—á—Ç–æ-—Ç–æ", move_after)) {
    // –£—Å–ø–µ—Ö, –º–æ–∂–µ–º –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª
    ps = copy;
}
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è! –ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å Pull Request.

---

<div align="center">
–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç—Ä–æ–∫
</div>
